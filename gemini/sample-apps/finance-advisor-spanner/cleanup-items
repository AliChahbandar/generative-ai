<!-- Finvest Spanner Demo App -->

DROP INDEX IF EXISTS category_Tokens_IDX;
DROP INDEX  IF EXISTS fund_benchmark_Tokens_IDX;
DROP INDEX  IF EXISTS fund_name_Tokens_IDX;
DROP INDEX  IF EXISTS investment_managers_Substring_investment_Strategy_Tokens_Combo_IDX;
DROP INDEX  IF EXISTS investment_managers_Substring_NgRAM_investment_Strategy_Tokens_Combo_IDX;
DROP INDEX  IF EXISTS investment_managers_Substring_Tokens_IDX;
DROP INDEX  IF EXISTS investment_managers_Substring_Tokens_NGRAM_IDX;
DROP INDEX  IF EXISTS investment_managers_Tokens_IDX;
DROP INDEX  IF EXISTS investment_strategy_Tokens_IDX;
DROP INDEX  IF EXISTS morningstar_benchmark_Tokens_IDX;
DROP INDEX  IF EXISTS top5_holdings_Tokens_IDX;
DROP INDEX  IF EXISTS top5_regions_Tokens_IDX;

DROP IF EXISTS PROPERTY GRAPH FundGraph;

ALTER TABLE EU_MutualFunds DROP COLUMN  fund_name_Tokens  ;
ALTER TABLE EU_MutualFunds DROP COLUMN  category_Tokens  ;
ALTER TABLE EU_MutualFunds DROP COLUMN  investment_strategy_Tokens ;
ALTER TABLE EU_MutualFunds DROP COLUMN  investment_managers_Tokens  ;
ALTER TABLE EU_MutualFunds DROP COLUMN  fund_benchmark_Tokens ;
ALTER TABLE EU_MutualFunds DROP COLUMN  morningstar_benchmark_Tokens  ;
ALTER TABLE EU_MutualFunds DROP COLUMN  top5_regions_Tokens  ;
ALTER TABLE EU_MutualFunds DROP COLUMN  top5_holdings_Tokens  ;
ALTER TABLE EU_MutualFunds DROP COLUMN  investment_managers_Substring_Tokens   ;
ALTER TABLE EU_MutualFunds DROP COLUMN  investment_managers_Substring_Tokens_NGRAM   ;



gcloud dataflow jobs run cloud-spanner-export-spanner-fts-mf-data --gcs-location gs://dataflow-templates-us-central1/latest/Cloud_Spanner_to_GCS_Avro --region us-central1 --num-workers 2 --worker-machine-type n2-standard-2 --staging-location gs://eu-mf-demo/temp/ --subnetwork https://www.googleapis.com/compute/v1/projects/spanner-demos-ce/regions/us-central1/subnetworks/central --disable-public-ips --additional-experiments use_runner_v2 --additional-user-labels "" --parameters instanceId=spanner-fts,databaseId=mf-data,outputDir=gs://eu-mf-demo/export/jul22/,spannerHost=https://batch-spanner.googleapis.com,shouldExportTimestampAsLogicalType=false,shouldExportRelatedTables=false,dataBoostEnabled=true


## IMPORT STEPS 

gcloud dataflow jobs run cloud-spanner-import-spanner-fts-mf-data-test --gcs-location gs://dataflow-templates-us-central1/latest/GCS_Avro_to_Cloud_Spanner --region us-central1 --num-workers 2 --worker-machine-type n2-standard-2 --staging-location gs://dataflow-staging-us-central1-473832897378/temp/ --subnetwork https://www.googleapis.com/compute/v1/projects/spanner-demos-ce/regions/us-central1/subnetworks/central --disable-public-ips --additional-experiments use_runner_v2 "" --parameters instanceId=spanner-fts,databaseId=mf-data-test,inputDir=gs://eu-mf-demo/export/jul22/spanner-fts-mf-data-2024-07-22_14_18_14-4676046613725049800/,spannerHost=https://batch-spanner.googleapis.com,waitForIndexes=false,waitForForeignKeys=false,waitForChangeStreams=true,waitForSequences=true,earlyIndexCreateFlag=true,ddlCreationTimeoutInMinutes=30


